model Ingredient {
    id                 Int                 @id @default(autoincrement())
    name               String
    pluralName         String?             @map("plural_name")
    sectionIngredients SectionIngredient[]

    @@map("ingredients")
}

model RecipeIngredientsSection {
    id                 Int                 @id @default(autoincrement())
    name               String?
    recipeId           Int                 @map("recipe_id")
    subRecipeId        Int?                @map("sub_recipe_id")
    ratio              Float?
    isDefault          Boolean             @default(false) @map("is_default")
    subRecipe          Recipe?             @relation("recipe_ingredients_sections_sub_recipe_idTorecipes", fields: [subRecipeId], references: [id], onDelete: Cascade, onUpdate: NoAction)
    recipe             Recipe              @relation("recipe_ingredients_sections_recipe_idTorecipes", fields: [recipeId], references: [id], onDelete: Cascade, onUpdate: NoAction)
    sectionIngredients SectionIngredient[]

    @@map("recipe_ingredients_sections")
}

model Recipe {
    id                  Int                        @id @default(autoincrement())
    name                String
    image               String
    steps               String
    subRecipes          RecipeIngredientsSection[] @relation("recipe_ingredients_sections_sub_recipe_idTorecipes")
    ingredientsSections RecipeIngredientsSection[] @relation("recipe_ingredients_sections_recipe_idTorecipes")

    @@map("recipes")
}

model SectionIngredient {
    id                       Int                      @id @default(autoincrement())
    sectionId                Int                      @map("section_id")
    ingredientId             Int                      @map("ingredient_id")
    quantity                 Float
    unit                     String?
    ingredient               Ingredient               @relation(fields: [ingredientId], references: [id], onDelete: Cascade, onUpdate: NoAction)
    recipeIngredientsSection RecipeIngredientsSection @relation(fields: [sectionId], references: [id], onDelete: Cascade, onUpdate: NoAction)

    @@map("section_ingredients")
}
