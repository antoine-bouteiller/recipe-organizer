# Architecture

## State Management

| Tool | Use Case |
|------|----------|
| TanStack Store | Client-side state (shopping list, search) |
| TanStack Query | Server state, data fetching, caching |
| Cookies | Shopping list persistence via `@/lib/cookie` |

## API Routes

Follow TanStack Start conventions in `src/routes/api/`:

- **Auth:** `src/routes/api/auth/$.ts` (Better Auth catch-all)
- **Images:** `src/routes/api/image/$id.ts` (R2 image serving)

## Type Safety

- **Path alias:** `@/*` maps to `src/*`
- **Compiler:** `tsgo` instead of `tsc`
- **Strict mode:** Enabled
- **Worker types:** `worker-configuration.d.ts`

## Auto-Generated Files

**Do not edit manually:**
- `src/routeTree.gen.ts` - Regenerated by TanStack Router on `bun dev`

## Service Worker

Custom generation in `service-worker-generate.ts` using Workbox.
